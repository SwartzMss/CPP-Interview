---
title: 数组与指针高频陷阱
tags:
  - c
  - 数组
  - 指针
---

## 核心结论

- 数组名不是变量，不能自增；指针变量可以自增。`int a[10]; int *p = a; ++p; // OK, ++a; // 不行`
- 数组作函数参数会退化成指针，`sizeof(a)` 在形参处仅得指针大小（64-bit 环境通常为 8 字节）。
- 二维数组传参必须给出列数：`void foo(int a[][4]);` 行数可省略，编译器需列跨度做指针运算。
- 野指针：未初始化直接解引用；悬空指针：对象已释放/离开作用域后仍被使用。
- 指针加减按元素跨度移动：`p++` 让 `p` 前进 `sizeof(*p)` 字节。
- 多级指针解引用：`*pp == p`，`**pp` 得到底层对象值。
- 返回局部变量地址属于未定义行为（栈内存已失效）。

## 示例

```c
void foo(int a[]) {
    printf("%zu\n", sizeof(a)); // 8
}

int x = 10; int *p = &x; int **pp = &p;
printf("%d %d\n", *p, **pp); // 10 10
```
